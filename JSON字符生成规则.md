## 1 关于键的设置

-

### 1.1 示例

```javascript
const jsonStr = {
	"000": "xxxxxxxxx",
	"002": "xxxx",
	. . .
	"929": "xxxx"
}
```

-

### 1.2 解释

菜单层级的为 0 - 9 一共10层菜单，键盘配置为 20个按键的按下，以及5个旋钮的左旋右旋配置，依次是第 0 个旋钮的左旋控制，接下来是第 0 个旋钮的右旋控制，之后的旋钮也同上设置。

| 字符 | 功能                                                         |
| ---- | ------------------------------------------------------------ |
| 000  | 0 - 第0级菜单，<br />00 - 第一个按键的功能                   |
| 929  | 9 - 第9级菜单<br />29 - 包含旋钮的30个配置中，最后一个旋钮的右旋 |






## 2 关于值的设置

-

### 2.1 设置功能标志位

-

#### 2.1.1 示例

```javascript
const jsonStr = {
	"102": "01xxxx"
}
```

-

#### 2.1.2 解释

用键值的前 (n) 位表示配置位，根据不同功能，配置位的数量与功能也不同

| 01xx   | 表示                           |
| ------ | ------------------------------ |
| 第一位 | 键盘所配置的对应功能（待扩展） |
| n...   | 不同功能配置位不同             |

-

| 功能                                                         | 功能位字符 | 实例                                                         |
| ------------------------------------------------------------ | :--------: | :----------------------------------------------------------- |
| 普通键值                                                     |     0      | a / b / c / abcd                                             |
| 组合键值（包含普通组合，修改为包含多个或一个组合，并且可以超过6个） |     1      | ctrl / shift + a / b / c + （ctrl / shift + a / b / c）/ （abc） |
| 普通延迟键值                                                 |     2      | a / b / c / abcd + 200ms + a / b / c / abcd                  |
| 组合延迟键值                                                 |     3      | ctrl / shift + a / b / c / abcd ( < 6) + 200ms + ....        |
| ...                                                          |            |                                                              |

-

### 2.2 普通键值

-

#### 2.2.1 示例

```javascript
const jsonStr = {
	"102": "0 04 04 05 06 07"
}
// "00404050607" -> abcd
```

-

#### 2.2.2 解释

| 字符        | 表示                                                         |
| ----------- | ------------------------------------------------------------ |
| 0 04        | 0 - 普通键值功能 <br />02 - 后面普通按键的数量， 有两位，用16进制表示 |
| 04 05 06 07 | 代表十六进制 hid usage id 码，每一个键盘的键值设置两位       |

-

### 2.3 组合键值（包含普通组合）（一个或多个组合）（超过6个键）

-

#### 2.3.1 示例

```js
const jsonStr = {
	"102": "103 C802 04 4E C203 04 4E 05 0001 4E"
}
// "103010104010106010119" -> ctrl  a + ctrl c + ctrl v 
```

-

#### 2.3.2 解释

特殊键值表：

| 特殊键值     | 代表字符 |
| ------------ | -------- |
| LeftControl  | 0        |
| LeftShift    | 1        |
| LeftAlt      | 2        |
| Left GUI     | 3        |
| RightControl | 4        |
| RightShift   | 5        |
| RightAlt     | 6        |
| Right GUI    | 7        |

-

特殊键值数组：

```c
special_key_code[8] = {0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80};
```

-

| 字符     | 表示                                                         |
| -------- | ------------------------------------------------------------ |
| 1 03     | 1 - 组合键值功能 1<br />03 - 此功能组合键的数量（一共有几组组合键)，用16进制表示 |
| C802     | C8 - 按照上面的特殊键值表的索引，在特殊键键值数组对应位置之和的十六进制数<br />02  - 之后的普通按键的数量，用16进制表示 |
| 04 4E    | 代表十六进制 hid usage id 码，每一个键盘的键值设置两位       |
| C203     | C2 - 按照上面的特殊键值表的索引，在特殊键键值数组对应位置之和的十六进制数<br />03  - 之后的普通按键的数量，用16进制表示 |
| 04 4E 05 | 代表十六进制 hid usage id 码，每一个键盘的键值设置两位       |
| 0001     | 00 - 表示穿插的普通按键<br />01 - 之后普通按键的数量，用16进制表示 |
| 4E       | 代表十六进制 hid usage id 码，每一个键盘的键值设置两位       |

-

### 2.4 普通延迟键值

延迟时间目前不能超过 40 * 255ms，也就是不能超过10s

#### 2.4.1 示例

```js
const jsonStr = {
	"101": "2 102 04 4E 0220 03 04 4E 05"
}
// "2102040500FF03060708" ->ab + delay(254ms) + cdf
```

-

#### 2.4.2 解释

| 字符     | 表示                                                         |
| -------- | ------------------------------------------------------------ |
| 2        | 普通延迟按键功能 2                                           |
| 1 02     | 1 - 本次功能所使用的延时数量，10进制表示<br />02 - 之后普通按键的数量 |
| 04 4E    | 代表十六进制 hid usage id 码，每一个键盘的键值设置两位       |
| 0220 03  | 0220 - 延迟的数值<br />---\|02 - 表示 255 的进制，用16进制表示，也就是几个 255<br />---\|20  - 表示延迟的毫秒数，用16进制表示（ms），0 < delay< 255<br /><br />03 - 之后的普通按键的数量，用16进制表示 |
| 04 4E 05 | 代表十六进制 hid usage id 码，每一个键盘的键值设置两位       |

-



### 2.5 组合延迟按键

#### 2.5.1 实例

```js
const jsonStr = {
	"101": "3 101C802 04 4E 0220 01 C2 03 04 4E 05"
}
// "3202 010104  010106 04FF 02 010119 010119 040FF 01 010104" 
// -> ctrl a + ctrl c + delay(4 * 255 + 254 ms) + ctrl v + ctrl v + delay(4 * 255 + 254 ms) + ctrl a
```

#### 2.5.2 解释

| 字符          | 表示                                                         |
| ------------- | ------------------------------------------------------------ |
| 3             | 普通延迟按键功能 3                                           |
| 101C802       | 1 - 本次功能所使用的延时数量，10进制表示<br />01 - 在所有延迟之前有几组组合键，16进制表示<br /><br />C8 - 按照上面的特殊键值表的索引，在特殊键键值数组对应位置之和的十六进制数<br />02 - 之后普通按键的数量，用16进制表示 |
| 04 4E         | 代表十六进制 hid usage id 码，每一个键盘的键值设置两位       |
| 0220 01 C2 03 | 0220 - 延迟的数值<br />---\|02 - 表示 255 的进制，用16进制表示，也就是几个 255<br />---\|20  - 表示延迟的毫秒数，用16进制表示（ms），0 < delay < 255<br /><br />01 - 之后有几组组合键值，16进制表示<br />C2 - 按照上面的特殊键值表的索引，在特殊键键值数组对应位置之和的十六进制数<br />03 - 之后的普通按键的数量，用16进制表示 |
| 04 4E 05      | 代表十六进制 hid usage id 码，每一个键盘的键值设置两位       |

-



### 2.6 鼠标

#### 2.6.1 实例

```js
const jsonStr = {
	"101": "4 03 120 030 140"
}
```

#### 2.6.2 解释

鼠标按键数组

```c
// 从左到右代表左键，右键，中键
const int mouse_key_array[3] = {0x01, 0X02, 0X04}
```

| 字符 | 表示                                                         |
| ---- | ------------------------------------------------------------ |
| 4    | 鼠标功能 4                                                   |
| 03   | 鼠标按键数组中对应的16进制按键码的和，<br />0x03 表示同时按下左键与右键 |
| 120  | 1 - 代表正值<br />20 - 鼠标X轴的16进制的位移量，正值向右移动，负值向左移动 |
| 030  | 0 - 代表负值<br />30 - 鼠标Y轴的16进制的位移量，正值向右移动，负值向左移动 |
| 140  | 1 - 代表正值<br />40 - 鼠标滚轮的16进制的位移量，正值向上移动，负值向下移动 |

-

### 2.7 媒体

#### 2.7.1 实例

```js
const jsonStr = {
	"101": "5 03 03"
}
```

#### 2.7.2 解释

媒体数组1

```c
// 从左到右代表：减小音量、增加音量、静音/取消静音、播放/暂停、下一首、上一首、停止、本地浏览器
const int media_array_one[8] = {0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80};
```

媒体数组2

```c
// 从左到右代表：Calculator、Consumer Control、Email Reader、Home、Back、Forward、New、Open
const int media_array_two[8] = {0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80};
```



| 字符 | 表示                |
| ---- | ------------------- |
| 5    | 媒体功能 5          |
| 03   | 媒体数组1的16进制和 |
| 03   | 媒体数组2的16进制和 |

-

### 2.8 菜单

#### 2.8.1 实例

```js
const jsonStr = {
	"101": "6 0 3"
}
```

#### 2.8.2 解释

| 字符 | 表示                                       |
| ---- | ------------------------------------------ |
| 6    | 切换菜单功能 6                             |
| 0    | 0 - 表示上一级菜单<br />1 - 表示下一级菜单 |
| 3    | 跳转到指定菜单（ 0  <= menu < = 10)        |

-

